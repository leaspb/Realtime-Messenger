# План задач и Roadmap

## Приоритет P0 (обязательные)

1. Добавить аутентификацию пользователя (хотя бы анонимные токены с подписью).
2. Устранить рассинхронизацию идентификатора текущего пользователя в UI.
3. Добавить централизованные сообщения об ошибках signaling на сервере.
4. Ввести минимальные автотесты для WebSocket сценариев.

## Приоритет P1 (важные)

1. Реализовать хранение истории сообщений в PostgreSQL.
2. Добавить пагинацию/загрузку истории чата.
3. Улучшить модель участников (username + userId в UI).
4. Добавить ограничение на размер комнаты и базовый rate-limit.

## Приоритет P2 (масштабирование)

1. Перейти с mesh на SFU для голосовых комнат с большим числом участников.
2. Вынести состояние комнат в внешний storage (Redis).
3. Поддержать multi-instance deployment.
4. Добавить TURN инфраструктуру для сложных сетей.

## Технический долг, обнаруженный в текущей версии

1. `DATABASE_URL` обязателен, хотя runtime-функционал чата в основном in-memory.
2. Часть DB-слоя подключена как задел, но не используется в бизнес-потоке.
3. В клиентском `use-webrtc` есть участки с допущениями по полям сигналинга, требующие унификации контракта.

## Предлагаемая последовательность реализации

1. Стабилизация протокола и идентификации пользователей.
2. Тесты и error handling.
3. Persistence для сообщений.
4. Масштабирование медиа-соединений.
